{
    "grading_parameters" : {
        "TOTAL_POINTS" : 20,
        "AUTO_POINTS" : 20
    },
    "resource_limits" : {
        "RLIMIT_CPU" : 60,
        "RLIMIT_NPROC" : 100,
        "RLIMIT_AS" : "RLIM_INFINITY"
    },
    "testcases" : [

        // ************* COMPILATION *************
        {
            "type" : "Compilation",
            "title" : "Compilation of student code: Factorial.java",
            "command" : "/usr/bin/javac -cp /usr/local/submitty/JUnit/junit-4.12.jar hw0/Factorial.java",   
            "executable_name" : "hw0/Factorial.class",
            "points" : 2
        },
        {
            "type" : "Compilation",
            "title" : "Compilation of student and instructor test cases: *Test.java",
            "command" : "/usr/bin/javac -cp /usr/local/submitty/JUnit/junit-4.12.jar:. hw0/test/*Test.java",
            "executable_name" : "hw0/test/FactorialTest.class",
            "points" : 2
        },


        // ************* INSTRUMENTATION FOR EMMA *************
        {
            "title" : "Instrumentation of student code",
            "command" : "/usr/bin/java -cp /usr/local/submitty/JUnit/emma.jar emma instr -m overwrite -ip hw0",
            "points" : 0,
            "validation" : [ 
                { 
                    "method" : "EmmaInstrumentationGrader",
                    "filename" : "STDOUT.txt"
                }
            ]
        },

        // ************* RUNNING STUDENT TESTS *************
        {
            "title" : "Running student tests in hw0/tests/",
            "command" : "/usr/bin/java -noverify -cp /usr/local/submitty/JUnit/junit-4.12.jar:/usr/local/submitty/JUnit/hamcrest-core-1.3.jar:/usr/local/submitty/JUnit/emma.jar:/usr/local/submitty/JUnit/:. TestRunner hw0",
            "points" : 4,
            "validation" : [
                { 
                    "method" : "MultipleJUnitTestGrader",
                    "filename" : "STDOUT.txt"
                }
            ]
        },

        // ************* MEASURING COVERAGE ACHIEVED BY STUDENT TESTS *************
        {
            "title" : "Generating coverage report for student tests",
            "command" : "/usr/bin/java -cp /usr/local/submitty/JUnit/emma.jar emma report -r txt -in coverage.em,coverage.ec -Dreport.txt.out.file=emma_report.txt",
            "points" : 6,
            "validation" : [
                {
                    "method" : "errorIfEmpty",
                    "filename" : "STDOUT.txt",
                    "description" : "EclEmma report generation output",
                    "deduction" : 0.0
                },
	        {
                    "method" : "EmmaCoverageReportGrader",
                    "filename" : "emma_report.txt",
                    "coverage_threshold" : 90,
                    "deduction" : 1.0
                }
            ]
        },

        // ************* RUNNING INSTRUCTOR TESTS *************
        {
            "title" : "Instructor Test",
            "command" : "/usr/bin/java -noverify -cp /usr/local/submitty/JUnit/junit-4.12.jar:/usr/local/submitty/JUnit/hamcrest-core-1.3.jar:/usr/local/submitty/JUnit/emma.jar:. org.junit.runner.JUnitCore hw0.test.FactorialTest",
            "points" : 6,
            "validation" : [
                {
                    "method" : "JUnitTestGrader",
                    "filename" : "STDOUT.txt",
                    "num_tests" : 4
                }
            ]
        }
    ]
}
