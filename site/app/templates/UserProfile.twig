<div class="content">
    <h1>
        {% if not isViewOnly %}
            My Profile
        {% else %}
            About You
        {% endif %}
    </h1>
    <div class="user-info-wrapper {% if isViewOnly %} user-wrap-view-only {% endif %}">
        <div id="user-card">
            <div class="user-info-cont">
                <div class="user-info-title" id="basic_info">
                    <span>Basic Information</span>
                    {% if not isViewOnly %}
                    <span>
                        <a class="icon" tabindex="0" href="javascript:userNameChange()" aria-label="Edit user information" title="Edit user information">
                            <i class="fas fa-pencil-alt"></i> Edit Preferred Names
                        </a>
                    </span>
                    {% endif %}
                </div>
                <div class="user-info">
                    <div class="flex-row-col">
                        <span>
                            Username:
                        </span>
                        <span>
                            {{ user.getId() }}
                        </span>
                    </div>
                    <div class="flex-row-col">
                        <span>
                            First Name:
                        </span>
                        <span>
                            {{ user.getDisplayedFirstName() }}
                        </span>
                    </div>
                    <div class="flex-row-col">
                        <span>
                            Last Name:
                        </span>
                        <span>
                            {{ user.getDisplayedLastName() }}
                        </span>
                    </div>
                    <div class="flex-row-col">
                        <span>
                            Email:
                        </span>
                        <span>
                            {{ user.getEmail() }}
                        </span>
                    </div>
                    {% if display_access_level %}
                        <div class="flex-row-col">
                            <span>
                                Access Level:
                            </span>
                            <span>
                                {{ access_level }}
                            </span>
                        </div>
                    {% endif %}
                    {% if show_change_password %}
                        <div class="flex-row-col">
                            <span>
                                Change Password:
                            </span>
                            <span>
                                {# TODO show some kind of asterix #}
                                <a class="icon" tabindex="0" href="javascript:passwordChange()" aria-label="Change password" title="Change password">
                                    <i class="fas fa-pencil-alt"></i>
                                </a>
                            </span>
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="user-info-cont">
                <div class="user-info-title">
                   <span id="time_zone_selector_label"
                         data-user_time_zone="{{ user_time_zone }}"
                         data-available_time_zones="{{ available_time_zones }}"
                   >Time Zone (<span id="utc_offset_stub">UTC Offset <span id="user_utc_offset">{{ user_utc_offset }}</span></span>):
                       <a target=_blank href="https://submitty.org/student#how-can-i-specify-my-local-timezone" aria-label="How can I specify my local timezone">
                           <i style="font-style:normal;" class="fa-question-circle"></i>
                       </a>
                   </span>
                </div>
                <div class="user-info">
                    <div class="flex-row-col">
                        <label for="time_zone_general_drop_down">General Area:</label>
                        {% if isViewOnly %}
                            {{ user_time_zone|split('/')[0] }}
                        {% else %}
                            <select id="time_zone_general_drop_down"></select>
                        {% endif %}
                    </div>
                    <div class="flex-row-col">
                        <label for="time_zone_specific_drop_down">Specific Area:</label>
                        {% if isViewOnly %}
                            {{ user_time_zone|split('/')[1] }}
                        {% else %}
                            <select id="time_zone_specific_drop_down"></select>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="user-info-cont">
                <div class="user-info-title">
                    <span>Color Theme:</span>
                </div>
                <div class="user-info">
                    <div class="flex-row-col">
                        <label for="theme_change_select">Choose a color theme</label>
                        {% if isViewOnly %}
                            <span id="theme_value"></span>
                        {% else %}
                            <select id="theme_change_select" class="form-control" aria-label="Change Submitty's Theme">
                                <option value="system">Follow Device Theme</option>
                                <option value="system_black">Follow Device Theme (Black)</option>
                                <option value="light">Light Mode</option>
                                <option value="dark">Dark Mode</option>
                                <option value="dark_black">Dark Mode (Black)</option>
                            </select>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div id="user-card-img" class="{% if isViewOnly %} user-img-view-only {% endif %}">
            <div class="user-img-cont">
                {% set image = user.getDisplayImage() %}
                {% if image is not null %}
                    <span>
                        {{ base64_image(image.getImageBase64MaxDimension(250), image.getMimeType(), '%s %s'|format(user.getDisplayedFirstName(), user.getDisplayedLastName())) }}
                    </span>
                {% else %}
                    <span class="center-img-tag">
                        N/A
                    </span>
                {% endif %}
            </div>
            {% if not isViewOnly %}
            <span class="edit-user-img">
                <a class="icon" tabindex="0" href="javascript:userNameChange()" aria-label="Edit user information" title="Edit user information">
                    <i class="fas fa-pencil-alt"></i> Upload your profile photo
                </a>
            </span>
            {% endif %}
            {% if user.getDisplayImageState() == 'flagged' or true%}
                <span class="red-message">Your preferred image was flagged as inappropriate.</span>
            {% endif %}
        </div>
    </div>
</div>
{% include 'EditNameForm.twig' %}
{% if show_change_password %}
    {% include 'ChangePasswordForm.twig' %}
{% endif %}
