{% import _self as self %}
{#
    Required Params:
        - gradeable_id
        - has_solution: to show initial btn stating to start writing solutions
        -


#}
<div id="solution_ta_notes" class="rubric_panel">
    <div class="row">
        <span class="grading_label">Solution/TA Notes</span>
    </div>
    {% for component in solution_components %}
        {{ self.renderSolutionTaNotesCont(
            gradeable_id,
            component.id,
            component.is_first_edit,
            component.title,
            component.author,
            component.solution_notes,
            component.edited_at
        ) }}
    {% endfor %}
</div>


{% macro renderSolutionTaNotesCont(gradeable_id, component_id, is_first_edit, component_title, author, solution_notes, last_edit) %}

    <div class="solution-box box">
        <div class="solution-header">
            <div class="component-title">
                Solution for {{ component_title }}
            </div>
            {% if is_first_edit %}
                <button type="primary"
                        class="show-sol-btn btn btn-primary"
                        onclick="showSolutionTextboxCont('#sol-textbox-cont-{{ component_id }}', '#no-solution-box-{{ component_id }}');"
                >Start Now</button>
            {% else %}
                <div class="last-edit">
                    <span class="last-edit-time">Last edit @ <i>{{ last_edit }}</i> by <i>{{ author }}</i></span>
                </div>
            {% endif %}
        </div>
        <div class="row divider"></div>
        <div class="solution-cont">
            {% if is_first_edit %}
                <span class="solution-notes-text">
                    No Solutions or TA notes for  "{{ component_title}}" Component
                </span>
            {% else %}
                <div class="solution-saved">
                    <span class="solution-notes-text">
                        {{ solution_notes }}
                    </span>
                    <button type="primary"
                            id="save-solution"
                            class="btn btn-primary"
                            onclick="updateSolutionTaNotes('{{ gradeable_id }}', '{{ component_id }}');"
                    >Edit</button>
                </div>
                <div class="solution-edit hide">
                    <textarea id="solution-{{ component_id }}"
                              class="solution-ta-notes-textbox"
                              placeholder='Start writing the solution for "{{ component_title }}" component.'
                    >{{ solution_notes }}</textarea>
                    <button type="primary"
                            id="save-solution"
                            class="btn btn-primary"
                            onclick="updateSolutionTaNotes('{{ gradeable_id }}', '{{ component_id }}');"
                    >Update</button>
                </div>
            {% endif %}
        </div>
    </div>
{% endmacro %}
