{#
Required Input:
    component: {id, title, ta_comment, student_comment, page, lower_clamp, default, max_value, upper_clamp}
    edit_marks_enabled: If the marks table should be in edit mode
    show_mark_list: If the marks table should be started hidden or not
#}

{% set mark_list_visibility = show_mark_list ? '' : 'hidden' %}
<div id="component-{{ component.id }}"
     class="box component"
     data-component_id="{{ component.id }}"
     data-title="{{ component.title }}"
     data-ta_comment="{{ component.ta_comment }}"
     data-student_comment="{{ component.student_comment }}"
     data-page="{{ component.page }}"
     data-lower_clamp="{{ component.lower_clamp }}"
     data-default="{{ component.default }}"
     data-max_value="{{ component.max_value }}"
     data-upper_clamp="{{ component.upper_clamp }}">

    {# Title bar (only part that triggers collapse on click) #}
    <div class="box-title container" onclick="{% block component_click %}{% endblock %}">
        <div class="row header-block">
            {% block header_block %}
            {% endblock %}
        </div>
        <div class="row content-block {{ mark_list_visibility }}">
            <div class="col-no-gutters left-block container">
                {% block left_block %}
                {% endblock %}
            </div>

            <div class="col-sm container center-block container">
                {% block center_block %}
                {% endblock %}
            </div>

            <div class="col-no-gutters right-block container">
                {% if not grading_disabled %}
                    <div class="row">
                        {# Saving status #}
                        {% include "SavingTools.twig" with {
                            'show_save_tools': show_mark_list,
                            'cancel_on_click': 'onCancelComponent(this)'
                        } only %}
                    </div>
                {% endif %}

                {% block right_block %}
                {% endblock %}
            </div>
        </div>
    </div>
    {# /Title bar #}

    {# Marks table #}
    <div class="ta-rubric-table container" data-component_id="{{ component.id }}" {{ mark_list_visibility }}>
        {# twig.js doens't support blocks inside of for loops ... ANNOYING #}
        {% block marks_block %}
        {% endblock %}
        {% if edit_marks_enabled %}
            <div class="add-new-mark-container">
                <span class="add-new-mark" onclick="onAddNewMark(this);">
                    <i class="fa fa-plus-square add-new-mark-icon" aria-hidden="true"></i>Add new mark
                </span>
            </div>
        {% endif %}
        {% block extra_mark_rows %}
        {% endblock %}
    </div>
    {# /Marks table #}

    {% block mark_list_footer %}
    {% endblock %}
</div>